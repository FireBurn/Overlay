From c920975a55aee9df055d07ad0f83c5cb5146042a Mon Sep 17 00:00:00 2001
From: Mike Lothian <mike@fireburn.co.uk>
Date: Thu, 13 Mar 2025 22:21:00 +0000
Subject: [PATCH] Boost fix

---
 src/input_common/drivers/udp_client.cpp                | 10 +++++-----
 .../input_common/calibration_configuration_job.cpp     |  4 ++--
 2 files changed, 7 insertions(+), 7 deletions(-)

diff --git a/src/input_common/drivers/udp_client.cpp b/src/input_common/drivers/udp_client.cpp
index 553fee1aa..ed6c01d0a 100644
--- a/src/input_common/drivers/udp_client.cpp
+++ b/src/input_common/drivers/udp_client.cpp
@@ -26,8 +26,8 @@ public:
     using clock = std::chrono::system_clock;
 
     explicit Socket(const std::string& host, u16 port, SocketCallback callback_)
-        : callback(std::move(callback_)), timer(io_service),
-          socket(io_service, udp::endpoint(udp::v4(), 0)), client_id(GenerateRandomClientId()) {
+        : callback(std::move(callback_)), timer(io_context),
+          socket(io_context, udp::endpoint(udp::v4(), 0)), client_id(GenerateRandomClientId()) {
         boost::system::error_code ec{};
         auto ipv4 = boost::asio::ip::make_address_v4(host, ec);
         if (ec.value() != boost::system::errc::success) {
@@ -39,11 +39,11 @@ public:
     }
 
     void Stop() {
-        io_service.stop();
+        io_context.stop();
     }
 
     void Loop() {
-        io_service.run();
+        io_context.run();
     }
 
     void StartSend(const clock::time_point& from) {
@@ -113,7 +113,7 @@ private:
     }
 
     SocketCallback callback;
-    boost::asio::io_service io_service;
+    boost::asio::io_context io_context;
     boost::asio::basic_waitable_timer<clock> timer;
     udp::socket socket;
 
diff --git a/src/tests/input_common/calibration_configuration_job.cpp b/src/tests/input_common/calibration_configuration_job.cpp
index 516ff1b30..14d9c8e2a 100644
--- a/src/tests/input_common/calibration_configuration_job.cpp
+++ b/src/tests/input_common/calibration_configuration_job.cpp
@@ -14,7 +14,7 @@
 class FakeCemuhookServer {
 public:
     FakeCemuhookServer()
-        : socket(io_service, boost::asio::ip::udp::endpoint(boost::asio::ip::udp::v4(), 0)) {}
+        : socket(io_context, boost::asio::ip::udp::endpoint(boost::asio::ip::udp::v4(), 0)) {}
 
     ~FakeCemuhookServer() {
         is_running = false;
@@ -82,7 +82,7 @@ public:
     }
 
 private:
-    boost::asio::io_service io_service;
+    boost::asio::io_context io_context;
     boost::asio::ip::udp::socket socket;
     std::array<u8, InputCommon::CemuhookUDP::MAX_PACKET_SIZE> send_buffer;
     std::array<u8, InputCommon::CemuhookUDP::MAX_PACKET_SIZE> receive_buffer;
-- 
2.48.1

